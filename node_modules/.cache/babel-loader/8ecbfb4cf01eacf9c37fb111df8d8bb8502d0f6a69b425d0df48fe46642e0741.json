{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nc/Desktop/BOT/UI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/nc/Desktop/BOT/UI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nc/Desktop/BOT/UI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{collection,addDoc,getDocs,updateDoc,deleteDoc,getDoc,doc,setDoc}from\"firebase/firestore\";import database from\"../firebase\";import{useState}from\"react\";function generateID(){var currentTime=Date.now().toString();return'PC'+currentTime;}var agencyRef=function agencyRef(agencyID){return doc(database,'Agency',agencyID);};export var createDevice=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(agencyID,deviceData){var _agencyRef,deviceCollectionRef,deviceID,newData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_agencyRef=doc(database,'Agency',agencyID);deviceCollectionRef=collection(_agencyRef,'devices');deviceID=generateID();newData=_objectSpread(_objectSpread({},deviceData),{},{device_id:deviceID});_context.next=7;return setDoc(doc(deviceCollectionRef,deviceID),newData);case 7:return _context.abrupt(\"return\",true);case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function createDevice(_x,_x2){return _ref.apply(this,arguments);};}();export var retrieveDevice=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(agencyID,deviceID){var deviceRef,deviceDoc,deviceData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;deviceRef=doc(collection(database,'Agency',agencyID,'devices'),deviceID);_context2.next=4;return getDoc(deviceRef);case 4:deviceDoc=_context2.sent;if(!deviceDoc.exists()){_context2.next=10;break;}deviceData=deviceDoc.data();return _context2.abrupt(\"return\",_objectSpread({id:deviceDoc.id},deviceData));case 10:throw new Error(\"Device not found\");case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}},_callee2,null,[[0,13]]);}));return function retrieveDevice(_x3,_x4){return _ref2.apply(this,arguments);};}();export var getDevices=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(agencyID){var _agencyRef2,deviceCollectionRef,devices,deviceArray;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_agencyRef2=doc(database,'Agency',agencyID);deviceCollectionRef=collection(_agencyRef2,'devices');_context3.next=5;return getDocs(deviceCollectionRef);case 5:devices=_context3.sent;deviceArray=[];devices.forEach(function(d){deviceArray.push(_objectSpread({id:d.id},d.data()));});return _context3.abrupt(\"return\",deviceArray);case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}},_callee3,null,[[0,11]]);}));return function getDevices(_x5){return _ref3.apply(this,arguments);};}();export var updateDevice=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(deviceData){var deviceRef;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;deviceRef=doc(database,'Agency',deviceData.agencyID,'devices',deviceData.device_id);_context4.next=4;return setDoc(deviceRef,deviceData);case 4:return _context4.abrupt(\"return\",true);case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 10:case\"end\":return _context4.stop();}},_callee4,null,[[0,7]]);}));return function updateDevice(_x6){return _ref4.apply(this,arguments);};}();export var deleteDevice=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(agentID,deviceID){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return deleteDoc(doc(database,'Agency',agentID,'devices',deviceID));case 3:return _context5.abrupt(\"return\",true);case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 9:case\"end\":return _context5.stop();}},_callee5,null,[[0,6]]);}));return function deleteDevice(_x7,_x8){return _ref5.apply(this,arguments);};}();","map":{"version":3,"names":["collection","addDoc","getDocs","updateDoc","deleteDoc","getDoc","doc","setDoc","database","useState","generateID","currentTime","Date","now","toString","agencyRef","agencyID","createDevice","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","deviceData","_agencyRef","deviceCollectionRef","deviceID","newData","wrap","_callee$","_context","prev","next","_objectSpread","device_id","abrupt","t0","console","log","stop","_x","_x2","apply","arguments","retrieveDevice","_ref2","_callee2","deviceRef","deviceDoc","_callee2$","_context2","sent","exists","data","id","Error","_x3","_x4","getDevices","_ref3","_callee3","_agencyRef2","devices","deviceArray","_callee3$","_context3","forEach","d","push","_x5","updateDevice","_ref4","_callee4","_callee4$","_context4","_x6","deleteDevice","_ref5","_callee5","agentID","_callee5$","_context5","_x7","_x8"],"sources":["/Users/nc/Desktop/BOT/UI/src/Repositories/deviceRepos.js"],"sourcesContent":["import { collection, addDoc, getDocs, updateDoc, deleteDoc, getDoc, doc, setDoc } from \"firebase/firestore\"\nimport database from \"../firebase\"\nimport { useState } from \"react\";\n\nfunction generateID() {\n    const currentTime = Date.now().toString();\n    return 'PC' + currentTime;\n}\n\n\nconst agencyRef = (agencyID) => {\n    return doc(database, 'Agency', agencyID)\n\n}\n\nexport const createDevice = async (agencyID, deviceData) => {\n    try {\n        const agencyRef = doc(database, 'Agency', agencyID)\n        const deviceCollectionRef = collection(agencyRef, 'devices')\n        const deviceID = generateID()\n        const newData = { ...deviceData, device_id: deviceID }\n        await setDoc(doc(deviceCollectionRef, deviceID), newData)\n        return true\n    }\n    catch (error) {\n        console.log(error)\n    }\n}\n\nexport const retrieveDevice = async (agencyID, deviceID) => {\n    try {\n        const deviceRef = doc(collection(database, 'Agency', agencyID, 'devices'), deviceID)\n        const deviceDoc = await getDoc(deviceRef)\n\n        if (deviceDoc.exists()) {\n            const deviceData = deviceDoc.data();\n            return { id: deviceDoc.id, ...deviceData }\n        }\n        else {\n            throw new Error(\"Device not found\")\n        }\n\n        // const deviceRef = doc(database, 'agency', agencyID, 'devices', deviceID);\n        // const deviceSnapshot = await getDoc(deviceRef);\n\n        // if (deviceSnapshot.exists()) {\n        //     const deviceData = deviceSnapshot.data();\n        //     return {id:deviceData.device_id,...deviceData};\n        // } else {\n        //     throw new Error('Device not found');\n        // }\n\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport const getDevices = async (agencyID) => {\n    try {\n\n        const agencyRef = doc(database, 'Agency', agencyID)\n        const deviceCollectionRef = collection(agencyRef, 'devices')\n        const devices = await getDocs(deviceCollectionRef)\n        const deviceArray = []\n        devices.forEach((d) => {\n            \n            deviceArray.push({\n               id:d.id,\n                ...d.data(),\n            });\n        })\n        return deviceArray;\n\n\n    } catch (error) {\n        console.log(error);\n    }\n};\n\nexport const updateDevice = async(deviceData) =>{\n    try{\n        const deviceRef = doc(database,'Agency',deviceData.agencyID,'devices',deviceData.device_id)\n        await setDoc(deviceRef,deviceData)\n        return true\n      \n        \n    }\n    catch(error){\n        console.log(error)\n    }\n\n}\n\nexport const deleteDevice = async(agentID,deviceID) =>{\n    try{\n        await deleteDoc(doc(database,'Agency',agentID,'devices',deviceID))\n        return true\n    }catch(error){\n        console.log(error)\n    }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}