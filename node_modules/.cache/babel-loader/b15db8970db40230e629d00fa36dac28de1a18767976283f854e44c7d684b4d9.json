{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nc/Desktop/BOT/UI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/nc/Desktop/BOT/UI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nc/Desktop/BOT/UI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{collection,addDoc,getDocs,updateDoc,deleteDoc,getDoc,doc,setDoc,query,where}from\"firebase/firestore\";import database from\"../firebase\";//declared collection\nvar accountCollectionRef=collection(database,'Accounts');export var getAllAcc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,account;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getDocs(accountCollectionRef);case 3:data=_context.sent;account=data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});});console.log(account);return _context.abrupt(\"return\",account);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getAllAcc(){return _ref.apply(this,arguments);};}();export var retrieveAcc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountID){var accountRef,accountDoc,account,accountObj;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;accountRef=doc(accountCollectionRef,accountID);_context2.next=4;return getDoc(accountRef);case 4:accountDoc=_context2.sent;if(!accountDoc.exists()){_context2.next=9;break;}account=accountDoc.data();accountObj={id:account.id,otp:account.otp,password:account.password,device_id:account.device_id};//console.log(account)\n//return account\nreturn _context2.abrupt(\"return\",_objectSpread({id:accountDoc.id},account));case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);throw new Error(\"Failed to retrieve account\");case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function retrieveAcc(_x){return _ref2.apply(this,arguments);};}();export var createAcc=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(accountData){var accountRef;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;accountRef=doc(accountCollectionRef,accountData.id);_context3.next=4;return setDoc(accountRef,accountData);case 4:return _context3.abrupt(\"return\",true);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function createAcc(_x2){return _ref3.apply(this,arguments);};}();export var updateAcc=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(accountData){var accountRef;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;accountRef=doc(accountCollectionRef,accountData.id);_context4.next=4;return setDoc(accountRef,accountData);case 4:return _context4.abrupt(\"return\",true);case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);case 9:case\"end\":return _context4.stop();}},_callee4,null,[[0,7]]);}));return function updateAcc(_x3){return _ref4.apply(this,arguments);};}();export var deleteAcc=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(accountID){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return deleteDoc(doc(accountCollectionRef,accountID));case 3:return _context5.abrupt(\"return\",true);case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 9:case\"end\":return _context5.stop();}},_callee5,null,[[0,6]]);}));return function deleteAcc(_x4){return _ref5.apply(this,arguments);};}();export var getAccountByDevice=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(deviceID){var accountList,account_query,snapshot;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:accountList=[];_context6.prev=1;//use Query to look for which account has the device_id match with deviceID\naccount_query=query(collection(database,\"Accounts\"),where(\"device_id\",\"==\",deviceID));_context6.next=5;return getDocs(account_query);case 5:snapshot=_context6.sent;if(!(snapshot.size>0)){_context6.next=11;break;}snapshot.forEach(function(doc){// console.log(doc.id, \" => \", doc.data()['name']);\naccountList.push({id:doc.id,account_id:doc.data().id});});return _context6.abrupt(\"return\",accountList);case 11:return _context6.abrupt(\"return\",[]);case 13:_context6.next=18;break;case 15:_context6.prev=15;_context6.t0=_context6[\"catch\"](1);console.log(_context6.t0);case 18:case\"end\":return _context6.stop();}},_callee6,null,[[1,15]]);}));return function getAccountByDevice(_x5){return _ref6.apply(this,arguments);};}();","map":{"version":3,"names":["collection","addDoc","getDocs","updateDoc","deleteDoc","getDoc","doc","setDoc","query","where","database","accountCollectionRef","getAllAcc","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","account","wrap","_callee$","_context","prev","next","sent","docs","map","_objectSpread","id","console","log","abrupt","t0","stop","apply","arguments","retrieveAcc","_ref2","_callee2","accountID","accountRef","accountDoc","accountObj","_callee2$","_context2","exists","otp","password","device_id","Error","_x","createAcc","_ref3","_callee3","accountData","_callee3$","_context3","_x2","updateAcc","_ref4","_callee4","_callee4$","_context4","_x3","deleteAcc","_ref5","_callee5","_callee5$","_context5","_x4","getAccountByDevice","_ref6","_callee6","deviceID","accountList","account_query","snapshot","_callee6$","_context6","size","forEach","push","account_id","_x5"],"sources":["/Users/nc/Desktop/BOT/UI/src/Repositories/accountRepos.js"],"sourcesContent":["import { collection, addDoc, getDocs, updateDoc, deleteDoc, getDoc, doc, setDoc, query,where} from \"firebase/firestore\"\nimport database from \"../firebase\"\n\n//declared collection\nconst accountCollectionRef = collection(database, 'Accounts')\nexport const getAllAcc = async () => {\n    try {\n        const data = await getDocs(accountCollectionRef);\n        const account = data.docs.map((doc) => ({ ...doc.data(), id: doc.id }));\n        console.log(account)\n        return account\n    } catch (error) {\n        console.log(error)\n    }\n\n}\n\nexport const retrieveAcc = async (accountID) => {\n    try {\n        const accountRef = doc(accountCollectionRef, accountID)\n        const accountDoc = await getDoc(accountRef)\n        if (accountDoc.exists()) {\n            const account = accountDoc.data()\n            const accountObj = {\n                id:account.id,\n                otp:account.otp,\n                password:account.password,\n                device_id:account.device_id\n            }\n            //console.log(account)\n            //return account\n            return { id: accountDoc.id, ...account };\n        }\n    } catch (error) {\n        throw new Error(\"Failed to retrieve account\")\n    }\n}\n\nexport const createAcc = async (accountData) => {\n    try {\n        const accountRef = doc(accountCollectionRef, accountData.id)\n        await setDoc(accountRef, accountData)\n        return true\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport const updateAcc = async (accountData) => {\n    try{\n        const accountRef = doc(accountCollectionRef,accountData.id)\n        await setDoc(accountRef,accountData)\n        return true\n    }catch(error){\n    \n    }\n}\n\nexport const deleteAcc = async (accountID) => {\n    try{\n       await deleteDoc(doc(accountCollectionRef,accountID))\n       return true\n    }catch(error){\n        console.log(error)\n    }\n\n}\n\nexport const getAccountByDevice = async (deviceID) => {\n    const accountList = []\n    try {\n        //use Query to look for which account has the device_id match with deviceID\n        const account_query = query(collection(database,\"Accounts\"),where(\"device_id\",\"==\",deviceID));\n        const snapshot = await getDocs(account_query)\n   \n        if (snapshot.size> 0){\n            snapshot.forEach((doc)=>{\n               // console.log(doc.id, \" => \", doc.data()['name']);\n                accountList.push({id:doc.id,account_id:doc.data().id})\n                \n            })\n            return accountList\n            // accountList.forEach((acc)=>{\n            //     console.log(acc.account_id)\n            // })\n        }\n        else{\n            return []\n            console.log(\"No account found\")\n        }\n\n    } catch (error) {\n        console.log(error)\n    }\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}