{"ast":null,"code":"import { collection, addDoc, getDocs, updateDoc, deleteDoc, getDoc, doc, setDoc, query } from \"firebase/firestore\";\nimport database from \"../firebase\";\n\n//declared collection\nconst accountCollectionRef = collection(database, 'Accounts');\nexport const getAllAcc = async () => {\n  try {\n    const data = await getDocs(accountCollectionRef);\n    const account = data.docs.map(doc => ({\n      ...doc.data(),\n      id: doc.id\n    }));\n    console.log(account);\n    return account;\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const retrieveAcc = async accountID => {\n  try {\n    const accountRef = doc(accountCollectionRef, accountID);\n    const accountDoc = await getDoc(accountRef);\n    if (accountDoc.exists()) {\n      return {\n        id: accountDoc.id,\n        ...accountDoc.data()\n      };\n    }\n  } catch (error) {\n    throw new Error(\"Failed to retrieve account\");\n  }\n};\nexport const createAcc = async accountData => {\n  try {\n    const accountRef = doc(accountCollectionRef, accountData.id);\n    await setDoc(accountRef, accountData);\n    return true;\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const updateAcc = async (accountID, accountData) => {};\nexport const deleteAcc = async accountID => {};\nexport const getAccountByDevice = async deviceID => {\n  try {\n    //use Query to look for which account has the device_id match with deviceID\n    const account_query = query(collection(database, \"Accounts\"), where(\"device_id\", \"==\", deviceID));\n    const snapshot = await getDocs(account_query);\n    snapshot.forEach(doc => {\n      console.log(doc.id, \" => \", doc.data());\n    });\n  } catch (error) {}\n};","map":{"version":3,"names":["collection","addDoc","getDocs","updateDoc","deleteDoc","getDoc","doc","setDoc","query","database","accountCollectionRef","getAllAcc","data","account","docs","map","id","console","log","error","retrieveAcc","accountID","accountRef","accountDoc","exists","Error","createAcc","accountData","updateAcc","deleteAcc","getAccountByDevice","deviceID","account_query","where","snapshot","forEach"],"sources":["/Users/nc/Desktop/BOT/UI/src/Repositories/accountRepos.js"],"sourcesContent":["import { collection, addDoc, getDocs, updateDoc, deleteDoc, getDoc, doc, setDoc, query } from \"firebase/firestore\"\nimport database from \"../firebase\"\n\n//declared collection\nconst accountCollectionRef = collection(database, 'Accounts')\nexport const getAllAcc = async () => {\n    try {\n        const data = await getDocs(accountCollectionRef);\n        const account = data.docs.map((doc) => ({ ...doc.data(), id: doc.id }));\n        console.log(account)\n        return account\n    } catch (error) {\n        console.log(error)\n    }\n\n}\n\nexport const retrieveAcc = async (accountID) => {\n    try {\n        const accountRef = doc(accountCollectionRef, accountID)\n        const accountDoc = await getDoc(accountRef)\n        if (accountDoc.exists()) {\n            return { id: accountDoc.id, ...accountDoc.data() };\n        }\n    } catch (error) {\n        throw new Error(\"Failed to retrieve account\")\n    }\n}\n\nexport const createAcc = async (accountData) => {\n    try {\n        const accountRef = doc(accountCollectionRef, accountData.id)\n        await setDoc(accountRef, accountData)\n        return true\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport const updateAcc = async (accountID, accountData) => {\n\n}\n\nexport const deleteAcc = async (accountID) => {\n\n\n}\n\nexport const getAccountByDevice = async (deviceID) => {\n    \n\n    try {\n        //use Query to look for which account has the device_id match with deviceID\n        const account_query = query(collection(database,\"Accounts\"),where(\"device_id\",\"==\",deviceID));\n        const snapshot = await getDocs(account_query)\n        snapshot.forEach((doc)=>{\n            console.log(doc.id, \" => \", doc.data());\n        })\n\n    } catch (error) { }\n}\n\n\n\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,MAAM,EAAEC,OAAO,EAAEC,SAAS,EAAEC,SAAS,EAAEC,MAAM,EAAEC,GAAG,EAAEC,MAAM,EAAEC,KAAK,QAAQ,oBAAoB;AAClH,OAAOC,QAAQ,MAAM,aAAa;;AAElC;AACA,MAAMC,oBAAoB,GAAGV,UAAU,CAACS,QAAQ,EAAE,UAAU,CAAC;AAC7D,OAAO,MAAME,SAAS,GAAG,MAAAA,CAAA,KAAY;EACjC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMV,OAAO,CAACQ,oBAAoB,CAAC;IAChD,MAAMG,OAAO,GAAGD,IAAI,CAACE,IAAI,CAACC,GAAG,CAAET,GAAG,KAAM;MAAE,GAAGA,GAAG,CAACM,IAAI,CAAC,CAAC;MAAEI,EAAE,EAAEV,GAAG,CAACU;IAAG,CAAC,CAAC,CAAC;IACvEC,OAAO,CAACC,GAAG,CAACL,OAAO,CAAC;IACpB,OAAOA,OAAO;EAClB,CAAC,CAAC,OAAOM,KAAK,EAAE;IACZF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;EACtB;AAEJ,CAAC;AAED,OAAO,MAAMC,WAAW,GAAG,MAAOC,SAAS,IAAK;EAC5C,IAAI;IACA,MAAMC,UAAU,GAAGhB,GAAG,CAACI,oBAAoB,EAAEW,SAAS,CAAC;IACvD,MAAME,UAAU,GAAG,MAAMlB,MAAM,CAACiB,UAAU,CAAC;IAC3C,IAAIC,UAAU,CAACC,MAAM,CAAC,CAAC,EAAE;MACrB,OAAO;QAAER,EAAE,EAAEO,UAAU,CAACP,EAAE;QAAE,GAAGO,UAAU,CAACX,IAAI,CAAC;MAAE,CAAC;IACtD;EACJ,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZ,MAAM,IAAIM,KAAK,CAAC,4BAA4B,CAAC;EACjD;AACJ,CAAC;AAED,OAAO,MAAMC,SAAS,GAAG,MAAOC,WAAW,IAAK;EAC5C,IAAI;IACA,MAAML,UAAU,GAAGhB,GAAG,CAACI,oBAAoB,EAAEiB,WAAW,CAACX,EAAE,CAAC;IAC5D,MAAMT,MAAM,CAACe,UAAU,EAAEK,WAAW,CAAC;IACrC,OAAO,IAAI;EACf,CAAC,CAAC,OAAOR,KAAK,EAAE;IACZF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;EACtB;AACJ,CAAC;AAED,OAAO,MAAMS,SAAS,GAAG,MAAAA,CAAOP,SAAS,EAAEM,WAAW,KAAK,CAE3D,CAAC;AAED,OAAO,MAAME,SAAS,GAAG,MAAOR,SAAS,IAAK,CAG9C,CAAC;AAED,OAAO,MAAMS,kBAAkB,GAAG,MAAOC,QAAQ,IAAK;EAGlD,IAAI;IACA;IACA,MAAMC,aAAa,GAAGxB,KAAK,CAACR,UAAU,CAACS,QAAQ,EAAC,UAAU,CAAC,EAACwB,KAAK,CAAC,WAAW,EAAC,IAAI,EAACF,QAAQ,CAAC,CAAC;IAC7F,MAAMG,QAAQ,GAAG,MAAMhC,OAAO,CAAC8B,aAAa,CAAC;IAC7CE,QAAQ,CAACC,OAAO,CAAE7B,GAAG,IAAG;MACpBW,OAAO,CAACC,GAAG,CAACZ,GAAG,CAACU,EAAE,EAAE,MAAM,EAAEV,GAAG,CAACM,IAAI,CAAC,CAAC,CAAC;IAC3C,CAAC,CAAC;EAEN,CAAC,CAAC,OAAOO,KAAK,EAAE,CAAE;AACtB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}